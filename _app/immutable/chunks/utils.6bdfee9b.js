var j=Object.defineProperty;var F=(s,e,t)=>e in s?j(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var i=(s,e,t)=>(F(s,typeof e!="symbol"?e+"":e,t),t),T=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var a=(s,e,t)=>(T(s,e,"read from private field"),t?t.call(s):e.get(s)),h=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},u=(s,e,t,n)=>(T(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),R=(s,e,t,n)=>({set _(r){u(s,e,r,t)},get _(){return a(s,e,n)}});import{b as L}from"./paths.18e38e44.js";var x,f,w,v,m;const k=class{constructor(e="",t=""){h(this,f,void 0);h(this,w,void 0);h(this,v,void 0);h(this,m,void 0);u(this,f,e),u(this,w,t),u(this,m,R(k,x)._++),u(this,v,0)}next(){return a(this,f)+a(this,m).toString(32)+(R(this,v)._++).toString(32)+a(this,w)}};let S=k;x=new WeakMap,f=new WeakMap,w=new WeakMap,v=new WeakMap,m=new WeakMap,h(S,x,1e4);function y(s,e){return Math.round(s*10**e)/10**e}const N={furniture:new Set,decor:new Set,kitchenware:new Set,gaming:new Set};class b{constructor(e,t){i(this,"leaves");i(this,"end");i(this,"values");this.leaves=new Map,this.end=!1,this.values=[],e!=null&&this.add(e,t)}add(e,t){if(e=e.toLowerCase(),e.length===0){this.end=!0,this.values.push(t);return}this.leaves.has(e[0])?this.leaves.get(e[0]).add(e.slice(1),t):this.leaves.set(e[0],new b(e.slice(1),t))}getResultsFor(e){e=e.toLowerCase();const t=[];let n=this;for(let r=0;r<e.length;++r)if(n=n.leaves.get(e[r]),!n)return[];return t.push(...n.getValues()),t}getValues(){const e=[...this.values];for(const t of this.leaves.values())e.push(...t.getValues());return[...new Set(e)]}}var M,p;const c=class{constructor(e,t,n,r,o,l,V){i(this,"name");i(this,"id");i(this,"price");i(this,"stock");i(this,"description");i(this,"image");i(this,"categories");i(this,"reviews");i(this,"selected");this.name=e,this.price=t,this.stock=n,this.description=o,this.image=L+l,this.reviews=V,this.selected=0,this.categories=r;for(const d of r)N[d].add(this);this.id=a(c,M).next(),a(c,p).set(this.id,this);const C=e.split(/\s+/);for(let d=0;d<C.length;++d)c.nameTrie.add(C.slice(d).join(" "),this)}static getProduct(e){return a(c,p).get(e)}addReview(e){this.reviews.push(e)}getRating(){return this.reviews.length===0?0:y(this.reviews.reduce((e,t)=>e+t.rating,0)/this.reviews.length,2)}add(e){return e=Math.min(this.stock-this.selected,e),this.selected+=e,e}remove(e){return e=Math.min(this.selected,e),this.selected-=e,e}toString(){return this.name}static search(e){return c.nameTrie.getResultsFor(e.trim())}};let g=c;M=new WeakMap,p=new WeakMap,h(g,M,new S("p-")),i(g,"nameTrie",new b),h(g,p,new Map);function A(s,e,t){return{comment:t,rating:s,username:e}}function B(s,e=3,t=0,n="-"){const r=[];let o=s.toString();o+=n.repeat(Math.max(0,t-o.length));for(let l=0;l<o.length;++l)l%e===0&&l!==0&&r.unshift(" "),r.unshift(o[o.length-1-l]);return r.join("")}export{N as C,g as P,A as R,S as U,B as f};
